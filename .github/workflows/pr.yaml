# Copyright AGNTCY Contributors (https://github.com/agntcy)
# SPDX-License-Identifier: Apache-2.0

name: PR

on:
  pull_request_target:
    types:
      - opened
      - edited
      - reopened
      - synchronize

permissions:
  pull-requests: write
  contents: read

jobs:
  validate_pr_title:
    name: Validate PR Title
    uses: ./.github/workflows/lint-pr-title.yaml

  label:
    name: Label
    runs-on: ubuntu-latest
    steps:
      # Return release version when merged: https://github.com/CodelyTV/pr-size-labeler/pull/97
      - uses: codelytv/pr-size-labeler@7410ab25f68d95323ceb6fc4b53e8556323b52a7 # 7410ab2
        with:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          xs_label: "size/XS"
          xs_max_size: "50"
          s_label: "size/S"
          s_max_size: "200"
          m_label: "size/M"
          m_max_size: "1000"
          l_label: "size/L"
          l_max_size: "2000"
          xl_label: "size/XL"
          fail_if_xl: "false"
          message_if_xl: >
            This PR exceeds the recommended size of 2000 lines.
            Please make sure you are NOT addressing multiple issues with one PR.
            Note that this PR might take longer to review due to large size.
          files_to_ignore: |
            "*.md"
            "**/*.pb.go"
            "**/*_pb2.py"
            "**/*_pb2_grpc.py"
            "**/*_pb.js"
            "**/*_pb.d.ts"
            "**/go.sum"
            "**/go.mod"
