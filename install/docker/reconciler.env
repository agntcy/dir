# Directory Reconciler Configuration
# Environment variable prefix: RECONCILER

# Database Configuration (PostgreSQL)
RECONCILER_DATABASE_TYPE=postgres
RECONCILER_DATABASE_POSTGRES_HOST=postgres
RECONCILER_DATABASE_POSTGRES_PORT=5432
RECONCILER_DATABASE_POSTGRES_DATABASE=directory
RECONCILER_DATABASE_POSTGRES_USERNAME=postgres
RECONCILER_DATABASE_POSTGRES_PASSWORD=postgres
RECONCILER_DATABASE_POSTGRES_SSL_MODE=disable

# Local Registry Configuration (shared by all tasks)
RECONCILER_LOCAL_REGISTRY_REGISTRY_ADDRESS=zot:5000
RECONCILER_LOCAL_REGISTRY_REPOSITORY_NAME=dir
RECONCILER_LOCAL_REGISTRY_AUTH_CONFIG_USERNAME=
RECONCILER_LOCAL_REGISTRY_AUTH_CONFIG_PASSWORD=
RECONCILER_LOCAL_REGISTRY_AUTH_CONFIG_INSECURE=true

# OASF Validation Configuration
# Schema URL for validating OASF records during indexing
RECONCILER_SCHEMA_URL=https://schema.oasf.outshift.com

# Regsync Task Configuration
# Synchronizes records from remote registries using regsync binary
RECONCILER_REGSYNC_ENABLED=true
RECONCILER_REGSYNC_INTERVAL=30s
RECONCILER_REGSYNC_BINARY_PATH=/usr/local/bin/regsync
RECONCILER_REGSYNC_TIMEOUT=10m

# Authentication for remote Directory connections (registry credentials provider)
# Modes: "jwt" or "x509"
RECONCILER_REGSYNC_AUTHN_ENABLED=false
RECONCILER_REGSYNC_AUTHN_MODE=x509
RECONCILER_REGSYNC_AUTHN_SOCKET_PATH=
RECONCILER_REGSYNC_AUTHN_AUDIENCES=

# Indexer Task Configuration
# Indexes records from local registry into search database
RECONCILER_INDEXER_ENABLED=true
RECONCILER_INDEXER_INTERVAL=30s

# Name Task Configuration
# Re-verifies DNS/name ownership of named records and caches results
RECONCILER_NAME_ENABLED=true
RECONCILER_NAME_INTERVAL=1h
RECONCILER_NAME_TTL=168h
RECONCILER_NAME_RECORD_TIMEOUT=30s

# Signature Task Configuration
# Verifies record signatures and caches results for the API
RECONCILER_SIGNATURE_ENABLED=true
RECONCILER_SIGNATURE_INTERVAL=1m
RECONCILER_SIGNATURE_TTL=168h
RECONCILER_SIGNATURE_RECORD_TIMEOUT=30s

# Logger Configuration (shared across components)
# Log levels: DEBUG, INFO, WARN, ERROR
# Log formats: json, text
DIRECTORY_LOGGER_LOG_LEVEL=DEBUG
DIRECTORY_LOGGER_LOG_FORMAT=json
