// Copyright AGNTCY Contributors (https://github.com/agntcy)
// SPDX-License-Identifier: Apache-2.0

syntax = "proto3";

package agntcy.dir.core.v1;

import "google/protobuf/struct.proto";

// Defines a reference or a globally unique content identifier of a record.
message RecordRef {
  // Globally-unique content identifier (CID) of the record.
  // Specs: https://github.com/multiformats/cid
  string cid = 1;
}

// Defines a Record stored in the system.
message RecordMeta {
  // CID of this object.
  string cid = 1;

  // Annotations attached to the record.
  map<string, string> annotations = 2;

  // Creation timestamp of the record in the RFC3339 format.
  // Specs: https://www.rfc-editor.org/rfc/rfc3339.html
  string created_at = 3;

  // The type of the object.
  // For example, "agntcy.dir.sign.v1.Signature" for signatures.
  string type = 4;

  // Links to other records.
  repeated RecordRef links = 5;

  // Parent record reference, if any.
  optional RecordRef parent = 6;

  // Size of the record data in bytes.
  uint64 size = 7;
}

message Record {
  optional RecordMeta meta = 1;

  // The actual data of the record.
  // Supported schemas:
  //
  // 0.3.1: https://schema.oasf.outshift.com/0.3.1/objects/agent
  // 0.7.0: https://schema.oasf.outshift.com/0.7.0/objects/record
  google.protobuf.Struct data = 2;
}
